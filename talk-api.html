<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>语音通讯 API | JessibucaPro Doc</title>
    <meta name="description" content="一款纯H5直播流播放器">
    <link rel="stylesheet" href="/assets/style.e3f468c3.css">
    <link rel="modulepreload" href="/assets/plugin-vue_export-helper.2d87e7a1.js">
    <link rel="modulepreload" href="/assets/Home.6a91b213.js">
    <link rel="modulepreload" href="/assets/talk-api.md.ac85f09f.lean.js">
    <link rel="modulepreload" href="/assets/app.6846a517.js">
    <meta name="twitter:title" content="语音通讯 API | JessibucaPro Doc">
    <meta property="og:title" content="语音通讯 API | JessibucaPro Doc">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="JessibucaPro Doc, back to home" data-v-40587210 data-v-7ac13a1e><!----> JessibucaPro Doc</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-640fc9fc><!--[--><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/api.html" data-v-49fe041d>API <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>更多API</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/playback-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>playback-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/audio-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>audio-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/multi-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>multi-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item active" href="/talk-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>talk-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/ai-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>ai-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>业务方案</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>问题解答</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/upgrade.html" data-v-49fe041d>升级 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/build.html" data-v-49fe041d>项目打包 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/changelog.html" data-v-49fe041d>更新日志 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-640fc9fc><!--[--><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/api.html" data-v-49fe041d>API <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>更多API</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/playback-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>playback-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/audio-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>audio-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/multi-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>multi-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item active" href="/talk-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>talk-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/ai-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>ai-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>业务方案</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>问题解答</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/upgrade.html" data-v-49fe041d>升级 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/build.html" data-v-49fe041d>项目打包 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/changelog.html" data-v-49fe041d>更新日志 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-17c48e2f><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#jessibucaprotalk-options">JessibucaProTalk(options)</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#enctype">encType</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#packettype">packetType</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#packettcpsendtype">packetTcpSendType</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#rtpssrc">rtpSsrc</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#numberchannels">numberChannels</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#samplerate">sampleRate</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#samplebitswidth">sampleBitsWidth</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#debug">debug</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#debuglevel">debugLevel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#testmicrophone">testMicrophone</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#engine">engine</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#checkgetusermediatimeout">checkGetUserMediaTimeout</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#getusermediatimeout">getUserMediaTimeout</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#savertptofile">saveRtpToFile</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#audioconstraints">audioConstraints</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#方法">方法</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#starttalk-wsurl-options">startTalk(wsUrl, options)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#stoptalk">stopTalk()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#gettalkvolume">getTalkVolume()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#settalkvolume-volume">setTalkVolume(volume)</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#事件">事件</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#talkstreamclose">talkStreamClose</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#talkstreamerror">talkStreamError</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#talkstreaminactive">talkStreamInactive</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#talkgetusermediatimeout">talkGetUserMediaTimeout</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#talkfailedandstop">talkFailedAndStop</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h1 id="语音通讯-api"><a class="header-anchor" href="#语音通讯-api" aria-hidden="true">#</a> 语音通讯 API</h1><h2 id="jessibucaprotalk-options"><a class="header-anchor" href="#jessibucaprotalk-options" aria-hidden="true">#</a> JessibucaProTalk(options)</h2><p>options 支持的参数有：</p><h3 id="enctype"><a class="header-anchor" href="#enctype" aria-hidden="true">#</a> encType</h3><ul><li><strong>类型</strong>：<code>string</code></li><li><strong>默认值</strong>：<code>g711a</code></li><li><strong>用法</strong>：</li></ul><p>语音编码类型，支持<code>g711a</code>和<code>g711u</code>和<code>pcm</code>，默认是<code>g711a</code></p><blockquote><p>g711a/g711u 格式的 8k采样率，16位精度，单声道</p></blockquote><blockquote><p>当格式选为g711格式的，如果采样率和，采用精度不是 <code>8k采样率，16位精度</code> 则会抛出警告。</p></blockquote><h3 id="packettype"><a class="header-anchor" href="#packettype" aria-hidden="true">#</a> packetType</h3><ul><li><strong>类型</strong>：<code>string</code></li><li><strong>默认值</strong>：<code>rtp</code></li><li><strong>用法</strong>：</li></ul><p>语音包类型，支持<code>rtp</code>，<code>empty</code>，默认是<code>rtp</code></p><blockquote><p>rtp 默认走的是tcp的封装格式，封装格式是 <code>[2]</code>+<code>[12]</code>+<code>[裸数据]</code>，支持配置成<code>udp</code>，封装格式是 <code>[12]</code>+<code>[裸数据]</code></p></blockquote><blockquote><p>empty 封装格式是 <code>[裸数据]</code></p></blockquote><blockquote><p><code>rtp</code> 仅支持<code>g711a</code>和<code>g711u</code>格式的封装。</p></blockquote><blockquote><p><code>empty</code> 支持所有格式的封装。</p></blockquote><h3 id="packettcpsendtype"><a class="header-anchor" href="#packettcpsendtype" aria-hidden="true">#</a> packetTcpSendType</h3><ul><li><strong>类型</strong>：<code>string</code></li><li><strong>默认值</strong>：<code>tcp</code></li><li><strong>用法</strong>：</li></ul><blockquote><p>rtp tcp 封装格式是 <code>[2]</code>+<code>[12]</code>+<code>[裸数据]</code></p></blockquote><p><code>[2]</code>: 2字节的rtp头(音频裸数据长度+12个字节的rtp扩展头)</p><p><code>[12]</code>: 12字节的rtp扩展头</p><p><code>[裸数据]</code>: 语音裸数据</p><blockquote><p>rtp udp 封装格式是 <code>[12]</code>+<code>[裸数据]</code></p></blockquote><p><code>[12]</code>: 12字节的rtp扩展头</p><p><code>[裸数据]</code>: 语音裸数据</p><h3 id="rtpssrc"><a class="header-anchor" href="#rtpssrc" aria-hidden="true">#</a> rtpSsrc</h3><ul><li><p><strong>类型</strong>：<code>string</code></p></li><li><p><strong>用法</strong>：</p></li></ul><p>rtp包的ssrc，10位</p><h3 id="numberchannels"><a class="header-anchor" href="#numberchannels" aria-hidden="true">#</a> numberChannels</h3><ul><li><strong>类型</strong>：<code>number</code></li><li><strong>默认值</strong>：<code>1</code></li><li><strong>用法</strong>：</li></ul><p>采样通道</p><h3 id="samplerate"><a class="header-anchor" href="#samplerate" aria-hidden="true">#</a> sampleRate</h3><ul><li><strong>类型</strong>：<code>number</code></li><li><strong>默认值</strong>：<code>8000</code></li><li><strong>用法</strong>： 采样率</li></ul><blockquote><p>g711a/g711u 格式的 <code>8</code>k采样率，<code>16位</code>精度，单声道</p></blockquote><blockquote><p>pcm裸流数据，支持任意格式的采样率</p></blockquote><h3 id="samplebitswidth"><a class="header-anchor" href="#samplebitswidth" aria-hidden="true">#</a> sampleBitsWidth</h3><ul><li><strong>类型</strong>：<code>number</code></li><li><strong>默认值</strong>：<code>16</code></li><li><strong>用法</strong>： 采样精度，支持<code>8</code> 、<code>16</code> 、<code>32</code></li></ul><blockquote><p>g711a/g711u 格式的 <code>8k</code>采样率，<code>16</code>位精度，单声道</p></blockquote><blockquote><p>pcm裸流数据，支持任意格式的精度</p></blockquote><h3 id="debug"><a class="header-anchor" href="#debug" aria-hidden="true">#</a> debug</h3><ul><li><strong>类型</strong>：<code>boolean</code></li><li><strong>默认值</strong>：false</li><li><strong>用法</strong>： 是否开启debug模式</li></ul><h3 id="debuglevel"><a class="header-anchor" href="#debuglevel" aria-hidden="true">#</a> debugLevel</h3><ul><li><strong>类型</strong>：<code>string</code></li><li><strong>默认值</strong>：<code>warn</code></li><li><strong>用法</strong>：</li></ul><p>debug模式下的日志级别，支持<code>debug</code>、<code>warn</code>，默认是<code>warn</code></p><blockquote><p>error 的信息默认就是会输出出来的。</p></blockquote><h3 id="testmicrophone"><a class="header-anchor" href="#testmicrophone" aria-hidden="true">#</a> testMicrophone</h3><ul><li><strong>类型</strong>：<code>boolean</code></li><li><strong>默认值</strong>：false</li><li><strong>用法</strong>： 是否开启测试麦克风,不连接ws</li></ul><h3 id="engine"><a class="header-anchor" href="#engine" aria-hidden="true">#</a> engine</h3><ul><li><strong>类型</strong>：<code>string</code></li><li><strong>默认值</strong>：<code>worklet</code></li><li><strong>用法</strong>：</li></ul><p>语音引擎，支持<code>worklet</code>和<code>script</code>，默认是<code>worklet</code></p><h3 id="checkgetusermediatimeout"><a class="header-anchor" href="#checkgetusermediatimeout" aria-hidden="true">#</a> checkGetUserMediaTimeout</h3><ul><li><strong>类型</strong>：<code>boolean</code></li><li><strong>默认值</strong>：false</li><li><strong>用法</strong>： 是否开启检测getUserMedia超时</li></ul><h3 id="getusermediatimeout"><a class="header-anchor" href="#getusermediatimeout" aria-hidden="true">#</a> getUserMediaTimeout</h3><ul><li><strong>类型</strong>：<code>number</code></li><li><strong>默认值</strong>：<code>10 * 1000</code></li><li><strong>用法</strong>：</li></ul><p>getUserMedia超时时间，单位ms</p><h3 id="savertptofile"><a class="header-anchor" href="#savertptofile" aria-hidden="true">#</a> saveRtpToFile</h3><ul><li><strong>类型</strong>：<code>boolean</code></li><li><strong>默认值</strong>：false</li><li><strong>用法</strong>： 是否保存成文件</li></ul><blockquote><p>仅供测试下载<code>rtp</code>文件使用，不要在生产环境使用，不然会在客户端内存里面保存大量的文件，导致内存溢出。</p></blockquote><h3 id="audioconstraints"><a class="header-anchor" href="#audioconstraints" aria-hidden="true">#</a> audioConstraints</h3><ul><li><strong>类型</strong>：<code>object</code></li><li><strong>默认值</strong>：<code>{}</code></li><li><strong>用法</strong>：配置getUserMedia的参数</li></ul><p>支持配置的参数有：</p><div class="language-"><pre><code>{
    deviceId: &#39;&#39;, // 音频设备的id
}
</code></pre></div><h2 id="方法"><a class="header-anchor" href="#方法" aria-hidden="true">#</a> 方法</h2><h3 id="starttalk-wsurl-options"><a class="header-anchor" href="#starttalk-wsurl-options" aria-hidden="true">#</a> startTalk(wsUrl, options)</h3><ul><li><strong>参数</strong>： <ul><li><code>{string} wsUrl</code></li><li><code>{object} options</code></li></ul></li><li><strong>用法</strong>： 开启语音</li><li><strong>返回值</strong>：<code>Promise</code></li></ul><blockquote><p>options 参数通初始化 new JessibucaProTalk(options) 时的参数一致</p></blockquote><h3 id="stoptalk"><a class="header-anchor" href="#stoptalk" aria-hidden="true">#</a> stopTalk()</h3><ul><li><strong>用法</strong>： 关闭语音</li><li><strong>返回值</strong>：<code>Promise</code></li></ul><h3 id="gettalkvolume"><a class="header-anchor" href="#gettalkvolume" aria-hidden="true">#</a> getTalkVolume()</h3><ul><li><strong>用法</strong>： 获取语音音量</li><li><strong>返回值</strong>：<code>Promise(number)</code></li></ul><blockquote><p>返回值是一个0-100的数字，表示当前语音音量</p></blockquote><h3 id="settalkvolume-volume"><a class="header-anchor" href="#settalkvolume-volume" aria-hidden="true">#</a> setTalkVolume(volume)</h3><ul><li><strong>用法</strong>： 设置语音音量</li><li><strong>返回值</strong>：<code>Promise</code></li><li><strong>参数</strong>： <ul><li><code>{number} volume</code> 0-100的数字，表示当前语音音量</li></ul></li></ul><h2 id="事件"><a class="header-anchor" href="#事件" aria-hidden="true">#</a> 事件</h2><h3 id="talkstreamclose"><a class="header-anchor" href="#talkstreamclose" aria-hidden="true">#</a> talkStreamClose</h3><p>语音通讯websocket的 close 事件</p><div class="language-javascript"><pre><code>jessibucaProTalk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;talkStreamClose&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;talkStreamClose&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//OR</span>
jessibucaProTalk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>JessibucaProTalk<span class="token punctuation">.</span><span class="token constant">EVENTS</span><span class="token punctuation">.</span>talkStreamClose<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;talkStreamClose&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>内部会调用<code>stopTalk()</code>方法</p></blockquote><h3 id="talkstreamerror"><a class="header-anchor" href="#talkstreamerror" aria-hidden="true">#</a> talkStreamError</h3><p>语音通讯websocket的 error 事件</p><div class="language-javascript"><pre><code>jessibucaProTalk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;talkStreamError&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;talkStreamError&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//OR</span>
jessibucaProTalk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>JessibucaProTalk<span class="token punctuation">.</span><span class="token constant">EVENTS</span><span class="token punctuation">.</span>talkStreamError<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;talkStreamError&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>内部会调用<code>stopTalk()</code>方法</p></blockquote><h3 id="talkstreaminactive"><a class="header-anchor" href="#talkstreaminactive" aria-hidden="true">#</a> talkStreamInactive</h3><p>语音通讯，切换音频输入源。</p><div class="language-javascript"><pre><code>
jessibucaProTalk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;talkStreamInactive&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;talkStreamInactive&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// OR</span>
jessibucaProTalk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>JessibucaProTalk<span class="token punctuation">.</span><span class="token constant">EVENTS</span><span class="token punctuation">.</span>talkStreamInactive<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;talkStreamInactive&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>内部会调用<code>stopTalk()</code>方法</p></blockquote><h3 id="talkgetusermediatimeout"><a class="header-anchor" href="#talkgetusermediatimeout" aria-hidden="true">#</a> talkGetUserMediaTimeout</h3><p>检测到getUserMedia超时时间超过<code>getUserMediaTimeout</code> 之后触发。</p><div class="language-javascript"><pre><code>jessibucaProTalk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;talkGetUserMediaTimeout&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;talkGetUserMediaTimeout&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// OR</span>
jessibucaProTalk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>JessibucaProTalk<span class="token punctuation">.</span><span class="token constant">EVENTS</span><span class="token punctuation">.</span>talkGetUserMediaTimeout<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;talkGetUserMediaTimeout&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>内部会调用<code>stopTalk()</code>方法</p></blockquote><h3 id="talkfailedandstop"><a class="header-anchor" href="#talkfailedandstop" aria-hidden="true">#</a> talkFailedAndStop</h3><p>语音通讯失败，停止语音通讯。</p><div class="language-javascript"><pre><code>
jessibucaProTalk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;talkFailedAndStop&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;talkFailedAndStop&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// OR</span>
jessibucaProTalk<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>JessibucaProTalk<span class="token punctuation">.</span><span class="token constant">EVENTS</span><span class="token punctuation">.</span>talkFailedAndStop<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;talkFailedAndStop&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><footer class="page-footer" data-v-8fcebc32 data-v-5c96fb00><div class="edit" data-v-5c96fb00><div class="edit-link" data-v-5c96fb00 data-v-55695e90><!----></div></div><div class="updated" data-v-5c96fb00><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"ai-api.md\":\"5c315cc8\",\"api.md\":\"8a5273ca\",\"audio-api.md\":\"1d5aa4de\",\"build.md\":\"2e248cca\",\"changelog-dev.md\":\"16427c3c\",\"changelog.md\":\"9478b91c\",\"doc-audio.md\":\"dbbf51f3\",\"doc-playback.md\":\"646d5eb9\",\"doc-talk.md\":\"f15d4b7d\",\"doc.md\":\"b82c37fa\",\"index.md\":\"e65248ff\",\"multi-api.md\":\"3ace59e5\",\"playback-api.md\":\"6dc734e7\",\"question-audio.md\":\"677fdbda\",\"question-playback.md\":\"eba78a88\",\"question-talk.md\":\"00c27080\",\"question.md\":\"9d35ef7e\",\"talk-api.md\":\"ac85f09f\",\"upgrade.md\":\"321af037\"}")</script>
    <script type="module" async src="/assets/app.6846a517.js"></script>
  </body>
</html>