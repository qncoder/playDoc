<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2024年1月 | JessibucaPro Doc</title>
    <meta name="description" content="一款纯H5直播流播放器">
    <link rel="stylesheet" href="/assets/style.e3f468c3.css">
    <link rel="modulepreload" href="/assets/plugin-vue_export-helper.2d87e7a1.js">
    <link rel="modulepreload" href="/assets/Home.6a91b213.js">
    <link rel="modulepreload" href="/assets/changelog.md.9478b91c.lean.js">
    <link rel="modulepreload" href="/assets/app.6846a517.js">
    <meta name="twitter:title" content="2024年1月 | JessibucaPro Doc">
    <meta property="og:title" content="2024年1月 | JessibucaPro Doc">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="JessibucaPro Doc, back to home" data-v-40587210 data-v-7ac13a1e><!----> JessibucaPro Doc</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-640fc9fc><!--[--><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/api.html" data-v-49fe041d>API <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>更多API</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/playback-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>playback-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/audio-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>audio-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/multi-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>multi-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/talk-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>talk-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/ai-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>ai-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>业务方案</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>问题解答</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/upgrade.html" data-v-49fe041d>升级 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/build.html" data-v-49fe041d>项目打包 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item active" href="/changelog.html" data-v-49fe041d>更新日志 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-640fc9fc><!--[--><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/api.html" data-v-49fe041d>API <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>更多API</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/playback-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>playback-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/audio-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>audio-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/multi-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>multi-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/talk-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>talk-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/ai-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>ai-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>业务方案</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>问题解答</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/upgrade.html" data-v-49fe041d>升级 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/build.html" data-v-49fe041d>项目打包 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item active" href="/changelog.html" data-v-49fe041d>更新日志 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-17c48e2f><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#_2024年1月">2024年1月</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2023年12月">2023年12月</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2023年11月">2023年11月</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2023年10月">2023年10月</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2023年9月">2023年9月</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2023年8月">2023年8月</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2023年7月">2023年7月</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2023年6月">2023年6月</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2023年5月">2023年5月</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2023年4月">2023年4月</a><!----></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h2 id="_2024年1月"><a class="header-anchor" href="#_2024年1月" aria-hidden="true">#</a> 2024年1月</h2><ul><li>【🐛 bug】</li></ul><hr><ul><li>【💡优化】优化 <code>play() failed because the user didn&#39;t interact with the document first</code> 报错的时候（一般配置是mse+canvas渲染），支持降级到wasm+canvas渲染,或者降级到mse+video渲染。</li><li>【💡优化】优化 <code>simdDecodeError</code>错误的时候，支持配置降级解码方案，<code>simd</code> 或者 <code>wasm</code>。</li><li>【💡优化】添加 <code>video</code>标签的canplay 事件监听超时机制，播放器内部会触发重播机制，如果重播次数内仍然无法播放，则降级到软解码播放。</li><li>【💡优化】优化 <code>playback</code> 模式下 <code>playbackRate</code> &gt;= <code>playbackForwardMaxRateDecodeIFrame</code>的时候只解码I帧视频，不解码音频数据。</li><li>【💡优化】优化播放url的判断逻辑，兼容<code>http(s)://xxx.mp4.live.flv</code>这种url情况。</li><li>【💡优化】优化<code>videoBuffer</code>为 0 的时候，缓冲区调用解码器的机制。</li><li>【💡优化】优化 play的url检测，当检测到不支持的协议的时候，会抛出异常。</li><li>【💡优化】优化播放<code>.m3u8</code>流地址的时候，优化网速显示。</li></ul><hr><ul><li>【🚀 功能】新增<code>mseDecodeAudio</code>参数，支持mse解码aac/mp3音频数据。</li><li>【🚀 功能】<code>addContentToCanvas()</code>方法新增<code>fill</code>,<code>fillOpacity</code> 参数，支持添加填充颜色，以及填充透明度。</li><li>【🚀 功能】<code>addContentToCanvas()</code>方法新增 <code>type=&quot;polygon&quot;</code>类型，支持绘制不规则多边形。</li><li>【🚀 功能】新增<code>disableContextmenu</code>参数，支持禁用右键菜单。</li><li>【🚀 功能】新增<code>extendDomConfig</code>参数，允许配置自定义DOM元素。</li><li>【🚀 功能】新增<code>widthOrHeightChangeReplayDelayTime</code>参数，支持在播放器宽高变化的时候，延迟重播时间（服务器端推过来的流可能存在脏数据，所以延迟播放）。</li><li>【🚀 功能】新增<code>websocket1006ErrorReplay</code>和<code>websocket1006ErrorReplayDelayTime</code>参数，支持ws报1006错误的时候，播放器内部进行重试。</li><li>【🚀 功能】multi多屏模型下，新增<code>supportMousemoveEvent</code>参数，支持抛出鼠标的mousemove事件。</li><li>【🚀 功能】multi多屏模型下，新增<code>multiMousedown</code>事件，支持鼠标按下事件。</li><li>【🚀 功能】multi多屏模型下，新增<code>initSingle()</code>方法，支持初始化单个播放窗口。</li><li>【🚀 功能】multi多屏模型下，新增<code>isWindowItemHasInitPlayer()</code>方法，支持查看单个播放窗口是否初始化了。</li></ul><h2 id="_2023年12月"><a class="header-anchor" href="#_2023年12月" aria-hidden="true">#</a> 2023年12月</h2><ul><li>【🐛 bug】</li></ul><hr><ul><li>【💡优化】优化了MSE解码，videoBuffer缓冲区逻辑。</li><li>【💡优化】优化性能面板上面的数据，只要一秒内有触发过丢帧机制的话，会标识是否触发丢帧显示为true。</li><li></li></ul><hr><ul><li>【🚀 功能】MSE解码，支持aac/mp3音频通过MSE解码播放。</li><li>【🚀 功能】<code>videoSmooth</code>事件，新增一个回调参数reason,string类型，表示当前渲染视频不流畅的原因。</li><li>【🚀 功能】<code>stats</code>事件，新增<code>performance</code>和<code>videoSmooth</code>字段，表示当前渲染性能和视频是否流畅。</li><li>【🚀 功能】新增<code>playFailedAndPausedShowMessage</code>参数配置，支持异常播放暂停显示错误信息提示。</li><li>【🚀 功能】新增 <code>showMessageConfig</code>参数配置，支持配置错误信息提示内容。</li><li>【🚀 功能】新增<code>showErrorMessageTips()</code> 和<code>hideErrorMessageTips()</code>方法，支持显示/隐藏错误提示消息。</li><li>【🚀 功能】支持 <a href="https://github.com/veovera/enhanced-rtmp/blob/main/README.md" target="_blank" rel="noopener noreferrer">enhanced-rtmp</a> 最新h265规范。</li><li>【🚀 功能】新增<code>nakedFlowH265DemuxUseNew</code>参数，支持配置裸流格式播放的时候使用的解封装器。</li><li>【🚀 功能】新增<code>isDropSameTimestampGop</code> 参数，支持配置当遇到两帧的pts相同的时候（大概率会出现解码器报错）直接丢弃当前剩余的GOP数据，等待播放后面的I帧数据。</li><li>【🚀 功能】支持 阿里云 Web RTC 播放格式：<code>artc://</code>。</li></ul><h2 id="_2023年11月"><a class="header-anchor" href="#_2023年11月" aria-hidden="true">#</a> 2023年11月</h2><ul><li>【🐛 bug】</li></ul><hr><ul><li>【💡优化】优化了useMSE: true模式下，在某些笔记本下面，浏览器最小化的时候，出现videoElement的currentTime不更新的情况，导致触发缓冲区满了，触发<code>The SourceBuffer is full, and cannot free space to append additional buffers</code> 异常。</li><li>【💡优化】优化了丢帧机制，以兼容音视频时间戳不同步的流（傻逼摄像头的bug），延迟计算机制会出现问题，导致一直出现丢帧的情况，造成视频卡顿。</li><li>【💡优化】升级了node-sass版本(5.00-&gt;9.00),需要升级node版本到最新的（21.x.x），也可以选择不升级，直接改成5.0.0 即可。</li></ul><hr><ul><li>【🚀 功能】增加了<code>wasm</code> 和 <code>wasm simd</code> 软解码开启多线程模式（需要https+设置response头设置）<a href="/question.html#localhost">关于如何配置使用wasm、wasm(simd)多线程解码</a> ，👍👍👍大大提升软解码性能👍👍👍。</li><li>【🚀 功能】增加了<code>replayShowLoadingIcon</code>参数，支持在触发重播逻辑的时候，是否显示加载中icon加文字。</li><li>【🚀 功能】增加了<code>decoderErrorAutoWasm</code>参数，支持在播放过程中硬解码失败的情况下，自动降级到wasm解码。</li><li>【🚀 功能】增加了<code>hardDecodingNotSupportAutoWasm</code>参数，支持在初始化播放的时候，如果硬解码不支持，自动降级到wasm解码。</li><li>【🚀 功能】新增了<code>stats</code>事件里面<code>performance</code>字段，表示当前的渲染性能。</li><li>【🚀 功能】新增了<code>stats</code>事件里面<code>videoSmooth</code>字段，表示当前渲染的视频是否播放流畅（是否存在卡顿情况）。</li><li>【🚀 功能】multi多屏模型下，新增<code>draggable</code>参数，支持拖拽播放窗口，来改变窗口的位置，以达到自定义排序目的。</li><li>【🚀 功能】multi多屏模型下，新增<code>getNextWindowItem()</code>方法，支持获取下一个播放窗口的实例。</li><li>【🚀 功能】multi多屏模型下，新增<code>getPrevWindowItem()</code>方法，支持获取上一个播放窗口的实例。</li><li>【🚀 功能】multi多屏模型下，新增<code>toggleSingleWindowContainerFullscreen()</code>方法，支持切换单个播放窗口全屏/取消全屏。</li></ul><h2 id="_2023年10月"><a class="header-anchor" href="#_2023年10月" aria-hidden="true">#</a> 2023年10月</h2><ul><li>【🐛 bug】修复了 <code>playback</code> 模式下，<code>动态(根据流)</code>模式下，播放时长不是按照服务器端推流的速率播放的问题（播放器会播放的慢，导致播放数据存在堆积）。</li><li>【🐛 bug】修复了<code>MP4</code>格式录制fps固定成了23了（修复到了25）。</li><li>【🐛 bug】修复了<code>webrtc</code>播放格式在ios下面静音无效。</li><li>【🐛 bug】修复了Edge浏览器下，<code>useWCS:true</code>播放H265流，在硬件不支持的情况下，没有降级到wasm播放。</li></ul><hr><ul><li>【💡优化】优化了<code>useMSE:true</code>模式下，提升播放的流畅性，不会出现短暂的卡顿效果。</li></ul><hr><ul><li>【🚀 功能】<code>playback</code> 模式添加<code>useMSE</code>参数，👍👍👍支持回放流使用<code>mse</code>模式播放。👍👍👍</li><li>【🚀 功能】 添加 <code>loadingIconStyle:{}</code> 参数，支持配置<code>loading icon</code> 的样式效果。</li><li>【🚀 功能】 添加<code>playFailedAndReplay</code>参数，可以通过一个参数来配置是否播放失败暂停播放逻辑（省掉了设置一大堆原子化参数）。</li><li>【🚀 功能】 支持webrtc协议下可以使用canvas渲染。</li><li>【🚀 功能】 添加<code>ghostWatermarkConfig:{}</code> 参数，支持幽灵水印配置。</li><li>【🚀 功能】 添加<code>dynamicWatermarkConfig:{}</code> 参数，支持动态水印配置。</li><li>【🚀 功能】 添加<code>currentPts</code>事件，支持获取当前渲染帧的时间戳（流里面的）。</li><li>【🚀 功能】添加<code>playFailedUseLastFrameShow</code>参数，支持配置当播放过程中出现异常导致的播放器暂停播放，是否显示最后一帧画面。</li></ul><h2 id="_2023年9月"><a class="header-anchor" href="#_2023年9月" aria-hidden="true">#</a> 2023年9月</h2><ul><li>【🐛 bug】修复了 <code>hasVideo</code> 为<code>false</code>的时候，计算 <code>heartTimeout</code> 错误，导致必然会触发 <code>heartTimeout</code> 事件，导致播放器暂停播放音频。</li><li>【🐛 bug】修复了 <code>playback</code> 模式下，<code>playbackTime</code>会落后一秒的问题。</li></ul><hr><ul><li>【💡优化】优化了<code>useMSE:true</code>模式下,sourceBuffer缓冲区使用情况，当缓冲区数据达到一定值，就会丢弃缓冲区的数据，👍👍👍减少内存的占用情况👍👍👍。</li><li>【💡优化】优化了chrome浏览器会报<code> Uncaught (in promise) DOMException: BodyStreamBuffer was aborted 错误</code>提示</li><li>【💡优化】优化了chrome浏览器会报<code>Uncaught (in promise) DOMException: The user aborted a request. 错误</code>提示</li></ul><hr><ul><li>【🚀 功能】性能面板新增CPU压力监测数据，可以实时知道当前电脑的CPU压力情况。</li><li>【🚀 功能】<code>playFailedAndPaused</code>事件，新增一个回调参数，返回 <code>videoInfo</code>，在销毁播放器之后，重新<code>new</code> 的时候，当参数传入，👍👍👍可以不出现黑屏情况👍👍👍。</li><li>【🚀 功能】 multi多屏模型下，添加<code>showSelectedBorder</code>参数，支持隐藏选中边框。</li><li>【🚀 功能】 multi多屏模型下，添加<code>getWindowItem(windowIndex)</code>方法，返回单窗口实例对象。</li><li>【🚀 功能】 multi多屏模型下，添加<code>dragenter</code>，<code>dragleave</code>,<code>drop</code> 事件，支持其他dom拖拽到播放器窗口。</li></ul><h2 id="_2023年8月"><a class="header-anchor" href="#_2023年8月" aria-hidden="true">#</a> 2023年8月</h2><ul><li>【🐛 bug】修复multi多屏模型下，container如果是带小数点的，会导致计算出来的宽高不正确，出现换行的情况。</li><li>【🐛 bug】修复触发<code>streamEnd</code>的时候，播放器会触发重置，导致画面变黑屏。</li><li>【🐛 bug】修复电子放大，在移动端没法拖动窗口移动的问题。</li><li>【🐛 bug】修复在手机端报<code>null is not an object (evaluating &#39;this.contextGl.getContextAttributes().stencil&#39;)</code>错误。</li></ul><hr><ul><li>【💡优化】优化<code>api文档</code>，从md文件改成了<code>html</code>文件。方便浏览器查看。</li></ul><hr><ul><li>【🚀 功能】新增<code>playbackCurrentTimeScroll()</code> 方法，支持回放流时间轴滚动到当前时间。</li><li>【🚀 功能】<code>playbackConfig</code>配置项添加<code>startTime</code>参数，支持设置回放流开始时间。</li><li>【🚀 功能】添加<code>isWebrtcForSRS</code>参数，支持<code>SRS</code>的<code>webrtc</code>播放。</li><li>【🚀 功能】<code>playbackConfig</code>配置项添加<code>controlType</code>参数，支持配置<code>24小时进度条</code>和<code>固定时长进度条</code>。</li><li>【🚀 功能】<code>playbackConfig</code>配置项添加<code>duration</code>参数，配置<code>固定时长进度条</code>时长。</li><li>【🚀 功能】添加<code>flvMetaData</code>事件，当flv流里面包含 Script Tag <code>metadata</code>数据的时候，会触发该事件。</li><li>【🚀 功能】添加<code>getFlvMetaData()</code>方法，获取flv流里面的<code>metadata</code>数据</li><li>【🚀 功能】添加<code>getPTZCmd(cmd,speed)</code>方法，支持获取<code>ptz</code> gb28181指令封装。</li><li>【🚀 功能】语音通讯talk添加<code>packetTcpSendType</code>参数，支持rtp tcp/udp封装格式。</li><li>【🚀 功能】添加<code>isWebrtcForOthers</code> 参数，支持其他服务器的<code>webrtc</code>播放。</li><li>【🚀 功能】添加<code>getExtendBtnList()</code>方法，支持获取到自定义的<code>按钮DOM Element</code>，可以执行业务上面的操作。</li><li>【🚀 功能】新增<code>multiFullscreen</code>事件，来支持多屏模式下，整个窗口全屏的情况，原先的<code>fullscreen</code>服务于单个播放窗口。</li><li>【🚀 功能】新增<code>demuxUseWorker</code>参数，支持在worker 里面请求资源并解封装协议数据。👍👍👍推荐多屏的情况下打开，可能提升性能👍👍👍。</li><li>【🚀 功能】新增<code>flv格式文件</code>的录制,支持音频+视频。</li></ul><h2 id="_2023年7月"><a class="header-anchor" href="#_2023年7月" aria-hidden="true">#</a> 2023年7月</h2><ul><li>【🐛 bug】无</li></ul><hr><ul><li>【💡优化】优化音频解码器，优化噪音产生情况。</li></ul><hr><ul><li>【🚀 功能】添加<code>aspectRatio</code>参数，支持设置播放器宽高比例。</li><li>【🚀 功能】添加<code>setAspectRatio(aspectRate)</code>方法，支持设置播放器宽高比例。</li><li>【🚀 功能】添加<code>decoderWorkerInitError</code>事件，当<code>decoder</code>配置的<code>worker地址</code>初始化失败的时候，会触发该事件。</li><li>【🚀 功能】<code>playbackConfig</code>配置项添加<code>showPrecision</code>参数，支持初始化的时候显示24H精度。</li><li>【🚀 功能】添加<code>playbackShowPrecisionChange</code>事件，当切换显示精度的时候，会触发这个事件。</li><li>【🚀 功能】添加<code>setPlaybackShowPrecision(showPrecision)</code>方法，支持切换显示精度。</li><li>【🚀 功能】添加<code>wcsUseWebgl2Render</code>参数，可以支持wcs使用webgl2渲染画面。</li></ul><h2 id="_2023年6月"><a class="header-anchor" href="#_2023年6月" aria-hidden="true">#</a> 2023年6月</h2><ul><li>【🐛 bug】修复<code>mes</code>,<code>wcs</code>硬解码，长时间（30分钟）最小化窗口，导致的播放延迟。</li></ul><hr><ul><li>【💡优化】优化<code>hasLoaded()</code>方法和<code>load</code>事件，<code>hasLoaded()</code>永久返回true。业务层不需要通过判断<code>hasLoaded()</code>和监听<code>load</code> 事件来调用播放器的<code>play()</code>方法</li><li>【💡优化】优化代码逻辑，提高健壮性。</li><li>【💡优化】优化<code>EVENTS</code>事件抛出，支持多个参数。</li><li>【💡优化】优化<code>wcs</code>使用<code>canvas</code>渲染，优先使用webgl2渲染，不支持降级到<code>canvas</code>渲染</li><li>【💡优化】优化打包的<code>browserslist</code>配置。</li><li>【💡优化】优化<code>checkFirstIFrame</code>参数在 <code>mse</code> 和 <code>wcs</code> 下面的处理逻辑。</li><li>【💡优化】优化http发起<code>fetch</code>请求在硬解码下面的处理逻辑。（修复user abort a request 错误情况）</li><li>【💡优化】优化<code>CDN</code>配置打包。</li></ul><hr><ul><li>【🚀 功能】添加<code>isWebrtcForZLM</code>参数，支持<code>zlm</code>的<code>webrtc</code>播放。</li><li>【🚀 功能】添加 <code>wasm simd</code>解码出错拦截，当出现持续2个gop还是连续解码报错，则会触发重播机制。</li><li>【🚀 功能】添加<code>streamEnd</code>事件，当流播放结束(异常)的时候，会触发该事件。</li><li>【🚀 功能】回放(TF卡)流支持<code>硬解码(webcodec)</code>播放，需要在<code>playbackConfig</code>里面配置<code>useWCS</code>参数。</li><li>【🚀 功能】语音通讯支持<code>packetType:empty</code>传输裸流数据。</li><li>【🚀 功能】添加<code>updateLoadingText(text)</code>方法，支持更新loading文案。</li><li>【🚀 功能】支持 mac(16.4) <code>safari</code> 和 ios(16.4) <code>safari</code> <code>webcodec</code> 支持 <code>H264</code> 硬解码。</li><li>【🚀 功能】添加<code>isEmitSEI</code>参数，支持<code>SEI</code>数据抛出。</li><li>【🚀 功能】添加<code>updateIsEmitSEI</code>方法，来更新<code>isEmitSEI</code>参数，支持播放过程中解析<code>SEI</code>数据。</li><li>【🚀 功能】添加<code>videoSEI</code>事件，监听<code>SEI</code>数据。</li><li>【🚀 功能】添加<code>pauseAndNextPlayUseLastFrameShow</code> 参数，支持调用 <code>pause()</code> 方法之后，再次调用<code>play()</code> 方法，在加载画面的时候，显示上一帧画面，而不是黑屏。</li><li>【🚀 功能】添加<code>videoElementPlayingFailed</code>事件，支持<code>video</code>元素播放失败的时候，降级到 <code>canvas</code> 渲染</li></ul><h2 id="_2023年5月"><a class="header-anchor" href="#_2023年5月" aria-hidden="true">#</a> 2023年5月</h2><ul><li>【🐛 bug】修复webcodec解码config不支持的时候没有降级到wasm解码，添加<code>webcodecsUnsupportedConfigurationError</code>事件</li></ul><hr><ul><li>【💡优化】优化性能面板数据（在使用video渲染的时候，可以统计到丢帧情况）。</li><li>【💡优化】优化日志显示，方便更好的定位问题。</li><li>【💡优化】优化<code>error事件</code>抛出。</li><li>【💡优化】监听<code>wasm使用video渲染</code>异常（浏览器版本过低不支持该特性），降级到<code>canvas渲染</code>。</li><li>【💡优化】优化<code>heartTimeout检测机制</code>（之前版本存在窗口<code>visibility</code> 为 <code>false</code>的时候检测不准确）</li><li>【💡优化】优化<code>stats事件</code>的<code>pTs</code>字段（在断流过程中也在增加）。</li><li>【💡优化】添加 <code>new</code> 的时候，<code>container</code> 如果已经被初始化过了，会报错不允许重复初始化。</li><li>【💡优化】添加 <code>playback-api.md</code>文件，将回放流的api单独列出来。</li><li>【💡优化】添加 <code>question.md</code>，<code>question-audio</code>文件，将问题这类的单独列出来。</li></ul><hr><ul><li>【🚀 功能】添加<code>isH265</code>参数，来兼容如果配置了优先硬解码，如果本身浏览器不支持硬解码265的情况下，会重新降级到wasm（simd）软解码。</li><li>【🚀 功能】添加<code>getVideoInfo() </code>方法(在监听videoInfo事件之后调用才会有数据，否则返回null)。</li><li>【🚀 功能】添加<code>getAudioInfo()</code> 方法(在监听audioInfo事件之后调用才会有数据，否则返回null)。</li><li>【🚀 功能】添加<code>ptzMoreArrowShow</code>,<code>ptzStopEmitDelay</code>，<code>ptzZoomShow</code>，<code>ptzApertureShow</code>，<code>ptzFocusShow</code> 参数，扩充ptz指令集。</li><li>【🚀 功能】添加单独的音频解码器（<code>decoder-pro-audio.js</code>，<code>decoder-pro-audio.wasm</code>），减少硬解码多屏情况下内存占用情况。</li><li>【🚀 功能】添加<code>isDecoderUseCDN</code>参数，支持配置decoder CDN绝对地址。</li><li>【🚀 功能】添加纯音频播放器(<code>jessibuca-pro-audio-player.js</code>)，支持移动端（平板端）息屏和后台播放。</li><li>【🚀 功能】添加<code>supportHls265</code>参数，支持 <code>hls 265</code> 格式播放。可以通过设置<code>false</code>降级到稳定的<code>hls 264</code>播放版本。</li><li>【🚀 功能】添加<code>isFmp4</code>参数，支持 <code>fmp4(264/265)</code> 格式播放。</li><li>【🚀 功能】添加<code>isMpeg4</code>参数，支持 <code>mpeg4</code> 格式播放。</li></ul><h2 id="_2023年4月"><a class="header-anchor" href="#_2023年4月" aria-hidden="true">#</a> 2023年4月</h2><ul><li>【🐛 bug】修复触发<code>crashLog</code>事件的时候，<code>videoInfo</code>和<code>audioInfo</code>数据没有采集到。</li><li>【🐛 bug】修复解析flv协议的时候，拼接时间戳漏了扩展时间戳位。</li><li>【🐛 bug】修复<code>mse解码</code>的时候，更新<code>stats</code>里面的<code>ts</code>字段错误。</li><li>【🐛 bug】针对于<code>mse use canvas render</code> 在自动播放的时候，会报” play() failed because the user didn&#39;t interact with the document first“ 错误，现在监听这个异常，并pause掉播放器，并抛出‘mediaSourceUseCanvasRenderPlayFailed’异常。- 【浏览器不允许没有任何用户交互的情况下，触发video标签的play方法】，交互上面需要引导客户手动触发视频播放。</li><li>【🐛 bug】修复手机端播放纯音频数据的时候灭屏或者后台运行就没有声音的问题。</li><li>【🐛 bug】修复<code>multi多屏模式下</code>，触发播放器底部操作栏close按钮，导致该窗口没法再次播放新的地址。</li><li>【🐛 bug】修复录播流模式下，<code>updatePlaybackForwardMaxRateDecodeIFrame() </code>方法在触发playback方法前调用没有生效的问题。</li><li>【🐛 bug】修复在某些情况下，频繁调用<code>pause-play-pause</code>会有失败的可能。（destroy异步化导致的）。</li></ul><hr><ul><li>【💡优化】优化录播流在切换倍率的时候，没有第一时间通知到worker线程（因为js堵塞），导致出现了延迟。</li><li>【💡优化】水印支持其他矩形窗和自定义HTML内容，并支持数组配置多个水印内容。</li><li>【💡优化】在ios手机端，播放音频数据，默认使用’script‘ 引擎。</li><li>【💡优化】添加参数为undefined校验，如参数有非法的则直接抛出Error异常。</li><li>【💡优化】优化录像流性能面板显示数据。</li><li>【💡优化】压缩优化图片资源，减少打包大小。</li></ul><hr><ul><li>【🚀 功能】ptz操作添加镜头拉近、拉远操作按钮，通过ptzZoomShow参数配置生效。</li><li>【🚀 功能】ptz操作添加左上，右上，左下，右下方向按钮，通过ptzMoreArrow参数配置生效。</li><li>【🚀 功能】添加webglContextLost 事件监听，并尝试恢复webgl上下文，如果失败触发重新播放（开放了webglContextLostErrorReplay参数，默认true）。</li><li>【🚀 功能】支持webgpu渲染canvas（需要chrome canary 版本，然后设置chrome://flags/#enable-unsafe-webgpu 打开）。</li><li>【🚀 功能】支持配置底部控制栏添加HTML内容。</li><li>【🚀 功能】支持播放过程中动态切换分辨率。</li><li>【🚀 功能】multi多屏支持3-1，4-1 这种不规则布局。</li><li>【🚀 功能】multi多屏添加supportDblclickContainerFullscreen 参数。</li><li>【🚀 功能】添加audioResumeState事件，当play()或audioResume()进行音频恢复或者setVolume()更新音量时回调。</li><li>【🚀 功能】添加websocketClose事件。</li><li>【🚀 功能】优化代码逻辑，提升代码健壮性。</li><li>【🚀 功能】更新文档。</li></ul></div></div><footer class="page-footer" data-v-8fcebc32 data-v-5c96fb00><div class="edit" data-v-5c96fb00><div class="edit-link" data-v-5c96fb00 data-v-55695e90><!----></div></div><div class="updated" data-v-5c96fb00><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"ai-api.md\":\"5c315cc8\",\"api.md\":\"8a5273ca\",\"audio-api.md\":\"1d5aa4de\",\"build.md\":\"2e248cca\",\"changelog-dev.md\":\"16427c3c\",\"changelog.md\":\"9478b91c\",\"doc-audio.md\":\"dbbf51f3\",\"doc-playback.md\":\"646d5eb9\",\"doc-talk.md\":\"f15d4b7d\",\"doc.md\":\"b82c37fa\",\"index.md\":\"e65248ff\",\"multi-api.md\":\"3ace59e5\",\"playback-api.md\":\"6dc734e7\",\"question-audio.md\":\"677fdbda\",\"question-playback.md\":\"eba78a88\",\"question-talk.md\":\"00c27080\",\"question.md\":\"9d35ef7e\",\"talk-api.md\":\"ac85f09f\",\"upgrade.md\":\"321af037\"}")</script>
    <script type="module" async src="/assets/app.6846a517.js"></script>
  </body>
</html>