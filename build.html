<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>项目编译打包 | JessibucaPro Doc</title>
    <meta name="description" content="一款纯H5直播流播放器">
    <link rel="stylesheet" href="/assets/style.e3f468c3.css">
    <link rel="modulepreload" href="/assets/plugin-vue_export-helper.2d87e7a1.js">
    <link rel="modulepreload" href="/assets/Home.6a91b213.js">
    <link rel="modulepreload" href="/assets/build.md.2e248cca.lean.js">
    <link rel="modulepreload" href="/assets/app.6846a517.js">
    <meta name="twitter:title" content="项目编译打包 | JessibucaPro Doc">
    <meta property="og:title" content="项目编译打包 | JessibucaPro Doc">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="JessibucaPro Doc, back to home" data-v-40587210 data-v-7ac13a1e><!----> JessibucaPro Doc</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-640fc9fc><!--[--><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/api.html" data-v-49fe041d>API <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>更多API</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/playback-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>playback-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/audio-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>audio-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/multi-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>multi-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/talk-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>talk-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/ai-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>ai-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>业务方案</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>问题解答</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/upgrade.html" data-v-49fe041d>升级 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item active" href="/build.html" data-v-49fe041d>项目打包 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/changelog.html" data-v-49fe041d>更新日志 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-640fc9fc><!--[--><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/api.html" data-v-49fe041d>API <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>更多API</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/playback-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>playback-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/audio-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>audio-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/multi-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>multi-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/talk-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>talk-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/ai-api.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>ai-API</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>业务方案</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/doc-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-dropdown-link" data-v-640fc9fc data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>问题解答</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音视频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-playback.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>回放流/录像流</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-audio.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>音频播放器</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/question-talk.html" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>语音通讯</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/upgrade.html" data-v-49fe041d>升级 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item active" href="/build.html" data-v-49fe041d>项目打包 <!----></a></div></div><div class="item" data-v-640fc9fc><div class="nav-link" data-v-640fc9fc data-v-49fe041d><a class="item" href="/changelog.html" data-v-49fe041d>更新日志 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-17c48e2f><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#播放器编译打包">播放器编译打包</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#依赖">依赖</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#调试">调试</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#打包">打包</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#wasm编译打包">wasm编译打包</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#依赖-1">依赖</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#编译">编译</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#wasm-打包-业务">wasm 打包(业务)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#wasm-合并到播放器">wasm 合并到播放器</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h1 id="项目编译打包"><a class="header-anchor" href="#项目编译打包" aria-hidden="true">#</a> 项目编译打包</h1><p>主要分为播放器js部分 和 wasm部分</p><h2 id="播放器编译打包"><a class="header-anchor" href="#播放器编译打包" aria-hidden="true">#</a> 播放器编译打包</h2><h3 id="依赖"><a class="header-anchor" href="#依赖" aria-hidden="true">#</a> 依赖</h3><ul><li><s>node 14.x.xx (node-sass 5.x 版本最高只能支持到node 的 <code>14</code> 版本)</s></li><li>node 21.x.xx (node-sass 9.0.0)</li></ul><p>如果需要升级<code>node-sass</code> 可以</p><p><a href="https://www.npmjs.com/package/node-sass" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/node-sass</a></p><p>根据项目中使用到的node的版本，适当的升级下 <code>node-sass</code> 版本就行了</p><blockquote><p>可以安装个 <code>nvm</code> 来管理node的版本 方便切换。</p></blockquote><h3 id="调试"><a class="header-anchor" href="#调试" aria-hidden="true">#</a> 调试</h3><h4 id="音视频播放器"><a class="header-anchor" href="#音视频播放器" aria-hidden="true">#</a> 音视频播放器</h4><div class="language-shell"><pre><code><span class="token function">npm</span> run dev
</code></pre></div><p>最终文件会打包在 <code>demo</code> 目录下</p><h4 id="音频播放器"><a class="header-anchor" href="#音频播放器" aria-hidden="true">#</a> 音频播放器</h4><div class="language-shell"><pre><code><span class="token function">npm</span> run dev:audio
</code></pre></div><p>最终文件会打包在 <code>demo/audio</code> 目录下</p><h3 id="打包"><a class="header-anchor" href="#打包" aria-hidden="true">#</a> 打包</h3><h4 id="音视频播放器-1"><a class="header-anchor" href="#音视频播放器-1" aria-hidden="true">#</a> 音视频播放器</h4><div class="language-shell"><pre><code><span class="token function">npm</span> run build
</code></pre></div><p>最终文件会打包在 <code>dist</code> 目录下</p><h4 id="音频播放器-1"><a class="header-anchor" href="#音频播放器-1" aria-hidden="true">#</a> 音频播放器</h4><div class="language-shell"><pre><code><span class="token function">npm</span> run build:audio
</code></pre></div><p>最终文件会打包在 <code>dist/audio</code> 目录下</p><h2 id="wasm编译打包"><a class="header-anchor" href="#wasm编译打包" aria-hidden="true">#</a> wasm编译打包</h2><h3 id="依赖-1"><a class="header-anchor" href="#依赖-1" aria-hidden="true">#</a> 依赖</h3><p>以mac 或者 linux 为例子</p><ul><li>python 3.x.x 版本</li><li>cMake 3.x.x 版本</li><li>emscripten 3.x 版本</li></ul><blockquote><p>本人的（mac）编译配置 emscripten 3.1.50 版本, python 3.10.6 版本, cMake 3.20.2 版本</p></blockquote><blockquote><p>如果是 linux: glibc 版本不能低于 2.18</p></blockquote><h3 id="编译"><a class="header-anchor" href="#编译" aria-hidden="true">#</a> 编译</h3><p>需要在服务器端 通过git形式拉取完整的代码。</p><blockquote><p>window 通过打包形式，然后上传到服务器端，会存在编码问题，导致编码失败。</p></blockquote><p>一次安装好了之后，</p><p>试下</p><div class="language-"><pre><code>emcc -v
</code></pre></div><p>如果出现版本信息，说明安装成功</p><p>如果出现<code>如果出现 version &#39;GLIBC_2.18&#39; not found</code> 错误</p><p>可以看下解决方案 <a href="https://www.cnblogs.com/music-liang/p/13029205.html" target="_blank" rel="noopener noreferrer">链接</a></p><div class="language-"><pre><code>运行：strings /lib64/libc.so.6 |grep GLIBC_
发现没有GLIBC_2.18
下载：wget http://mirrors.ustc.edu.cn/gnu/libc/glibc-2.18.tar.gz
解压：tar -zxvf glibc-2.18.tar.gz
进入解压文件夹，创建文件夹build：



mkdir build
cd build



运行configure配置，make，sudo make install



../configure --prefix=/usr
make -j4
sudo make install


</code></pre></div><p>如果出现 <code>emcc is unable to create an executable file C compiler test failed</code></p><p>则应该是emcc版本太高，glibc版本低。</p><blockquote><p>glibc 版本不能低于 2.18</p></blockquote><h4 id="ffmpeg（依赖）"><a class="header-anchor" href="#ffmpeg（依赖）" aria-hidden="true">#</a> ffmpeg（依赖）</h4><p>需要在 wasm/FFmpeg 目录下面</p><blockquote><p>一般情况下，不需要额外编译ffmpeg，因为已经编译好了，如果需要重新编译，可以参考下面的步骤</p></blockquote><p>音频解码器</p><div class="language-shell"><pre><code>python ffmpeg-audio.py
</code></pre></div><p>最终文件会打包在 <code>/wasm/wasm/thirdparty/ffmpeg-audio</code> 文件夹下面</p><p>视频解码器</p><div class="language-shell"><pre><code>python ffmpeg-video.py
</code></pre></div><p>最终文件会打包在 <code>/wasm/wasm/thirdparty/ffmpeg-video</code> 文件夹下面</p><p>视频解码器(多线程)</p><div class="language-shell"><pre><code>python ffmpeg-video-mt.py
</code></pre></div><p>最终文件会打包在 <code>/wasm/wasm/thirdparty/ffmpeg-video-mt</code> 文件夹下面</p><h5 id="编译出现的错误"><a class="header-anchor" href="#编译出现的错误" aria-hidden="true">#</a> 编译出现的错误</h5><div class="language-"><pre><code>makefile: /tests/Makefile: 没有那个文件或目录。

make: *** 没有规则可制定目标 “/tests/Makefile” 停止。
</code></pre></div><h4 id="simd-（依赖）"><a class="header-anchor" href="#simd-（依赖）" aria-hidden="true">#</a> simd （依赖）</h4><p>主要分别为 libavc 和 libhevc 编译</p><blockquote><p>一般情况下，不需要额外编译simd，因为已经编译好了，如果需要重新编译，可以参考下面的步骤</p></blockquote><h5 id="libavc"><a class="header-anchor" href="#libavc" aria-hidden="true">#</a> libavc</h5><p>需要在 wasm/simd/libavc 目录下面</p><div class="language-shell"><pre><code>python build.py
</code></pre></div><p>最终的打包之后的文件在 <code>/wasm/thirdparty/video/avc</code></p><p>然后需要把文件复制到 <code>/wasm/wasm/thirdparty/simd</code> 下</p><p>目录结构是一样的</p><div class="language-shell"><pre><code>-- simd
  -- include
    -- avc
       xxx.h 文件
    -- hecv
       xxx.h 文件
  -- lib
       xxx.a 文件
</code></pre></div><h5 id="libhevc"><a class="header-anchor" href="#libhevc" aria-hidden="true">#</a> libhevc</h5><p>需要在 wasm/simd/libhevc 目录下面</p><div class="language-shell"><pre><code>python build.py
</code></pre></div><p>最终的打包之后的文件在 <code>/wasm/thirdparty/video/hevc</code></p><p>然后需要把文件复制到 <code>/wasm/wasm/thirdparty/simd</code> 下</p><p>目录结构是一样的</p><div class="language-shell"><pre><code>-- simd
  -- include
    -- acv
       xxx.h 文件
    -- hecv
       xxx.h 文件
  -- lib
       xxx.a 文件
</code></pre></div><h4 id="simd-多线程"><a class="header-anchor" href="#simd-多线程" aria-hidden="true">#</a> simd(多线程)</h4><p>等同于 simd，只是多了一个多线程的版本</p><p>打包也是几乎一样的，只是需要把文件复制到 <code>/wasm/wasm/thirdparty/simd-mt</code> 下</p><h3 id="wasm-打包-业务"><a class="header-anchor" href="#wasm-打包-业务" aria-hidden="true">#</a> wasm 打包(业务)</h3><p>在 wasm 目录（下面有make_decoder-xxx.py 等文件）下。</p><blockquote><p>每次修改了c的业务代码，需要重新打包。</p></blockquote><div class="language-shell"><pre><code><span class="token builtin class-name">cd</span> wasm
python make_decoder-xxx.py
</code></pre></div><p>最终文件会打包在 <code>src</code> 目录下面的</p><h3 id="wasm-合并到播放器"><a class="header-anchor" href="#wasm-合并到播放器" aria-hidden="true">#</a> wasm 合并到播放器</h3><p>需要把 <code>wasm/src</code> 下面打包生成的文件 复制到播放器的 <code>src/decoder</code> 目录下面</p><blockquote><p>先安装依赖 <code>npm install</code></p></blockquote><blockquote><p>如果是用的 yarn 也是一样的。</p></blockquote><p>然后重新执行 <code>npm run build</code> 进行打包</p></div></div><footer class="page-footer" data-v-8fcebc32 data-v-5c96fb00><div class="edit" data-v-5c96fb00><div class="edit-link" data-v-5c96fb00 data-v-55695e90><!----></div></div><div class="updated" data-v-5c96fb00><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"ai-api.md\":\"5c315cc8\",\"api.md\":\"8a5273ca\",\"audio-api.md\":\"1d5aa4de\",\"build.md\":\"2e248cca\",\"changelog-dev.md\":\"16427c3c\",\"changelog.md\":\"9478b91c\",\"doc-audio.md\":\"dbbf51f3\",\"doc-playback.md\":\"646d5eb9\",\"doc-talk.md\":\"f15d4b7d\",\"doc.md\":\"b82c37fa\",\"index.md\":\"e65248ff\",\"multi-api.md\":\"3ace59e5\",\"playback-api.md\":\"6dc734e7\",\"question-audio.md\":\"677fdbda\",\"question-playback.md\":\"eba78a88\",\"question-talk.md\":\"00c27080\",\"question.md\":\"9d35ef7e\",\"talk-api.md\":\"ac85f09f\",\"upgrade.md\":\"321af037\"}")</script>
    <script type="module" async src="/assets/app.6846a517.js"></script>
  </body>
</html>